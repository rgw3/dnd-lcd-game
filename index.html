<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D&D LCD Game - Mattel 1981 Recreation</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="game-container">
        <header>
            <h1>Dungeons & Dragons</h1>
            <p class="subtitle">Computer Fantasy Game</p>
        </header>

        <div class="game-display">
            <!-- Isometric dungeon view canvas -->
            <div id="dungeon-view" class="dungeon-view">
                <canvas id="dungeon-canvas" width="400" height="300"></canvas>
                <div id="position-display" class="position-display">A0</div>
            </div>

            <!-- Status indicators -->
            <div class="status-bar">
                <div class="status-item">
                    <span class="label">Score:</span>
                    <span id="score">0</span>
                </div>
                <div class="status-item">
                    <span class="label">Time:</span>
                    <span id="time">0:00</span>
                </div>
                <div class="status-item">
                    <span class="label">Has Arrow:</span>
                    <span id="has-arrow">No</span>
                </div>
                <div class="status-item">
                    <span class="label">Has Rope:</span>
                    <span id="has-rope">No</span>
                </div>
            </div>
        </div>

        <div class="controls">
            <div class="button-group">
                <button id="btn-north" class="dir-btn">‚Üë North</button>
            </div>
            <div class="button-group">
                <button id="btn-west" class="dir-btn">‚Üê West</button>
                <button id="btn-shoot" class="action-btn">SHOOT</button>
                <button id="btn-east" class="dir-btn">‚Üí East</button>
            </div>
            <div class="button-group">
                <button id="btn-south" class="dir-btn">‚Üì South</button>
            </div>
            <div class="button-group">
                <button id="btn-new-game" class="action-btn">New Game</button>
                <button id="btn-how-to-play" class="action-btn">How to Play</button>
            </div>
        </div>

        <div class="game-info">
            <p id="message-display">Find the magical arrow, then slay the dragon!</p>
        </div>
    </div>

    <!-- Instructions Modal -->
    <div id="instructions-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>How to Play</h2>
            
            <div class="instructions-section">
                <h3>üéØ Objective</h3>
                <p>Find the magical arrow and use it to slay the dragon lurking in the dungeon!</p>
            </div>

            <div class="instructions-section">
                <h3>üïπÔ∏è Controls</h3>
                <p><strong>Movement:</strong> Use arrow keys (‚Üë‚Üì‚Üê‚Üí) or WASD keys, or click the direction buttons</p>
                <p><strong>Shoot:</strong> Press SPACE/ENTER or click SHOOT button</p>
                <p><strong>Mute:</strong> Press M to toggle sound on/off</p>
            </div>

            <div class="instructions-section">
                <h3>üó∫Ô∏è The Dungeon</h3>
                <p>You're in a 10x10 grid dungeon (coordinates A0 to J9). The edges wrap around - walk off one side and you appear on the opposite side!</p>
            </div>

            <div class="instructions-section">
                <h3>‚öîÔ∏è Items to Find</h3>
                <p><strong>üèπ Magical Arrow:</strong> You need this to kill the dragon. Without it, you're defenseless!</p>
                <p><strong>ü™¢ Rope:</strong> Saves you from falling into pits. Very useful for exploration!</p>
            </div>

            <div class="instructions-section">
                <h3>‚ö†Ô∏è Dangers</h3>
                <p><strong>üêâ Dragon:</strong> Instant death if you walk into it. When adjacent, you'll hear a roar and see warning messages. Shoot it with the arrow to win!</p>
                <p><strong>üï≥Ô∏è Pits (12 total):</strong> Fall in without a rope and you die. With a rope, you're saved! You'll feel a breeze when a pit is nearby.</p>
                <p><strong>ü¶á Bats (3 total):</strong> Teleport you to a random location. Could be anywhere - even into danger! You'll hear flapping wings when nearby.</p>
            </div>

            <div class="instructions-section">
                <h3>üèπ Shooting the Arrow</h3>
                <p>1. Find and collect the magical arrow</p>
                <p>2. Press SHOOT button or SPACE key</p>
                <p>3. Choose a direction (N/E/S/W)</p>
                <p>4. Arrow travels in a straight line across the entire row/column</p>
                <p>5. If you miss, the arrow lands somewhere - go retrieve it!</p>
                <p>6. Dragon repositions after a missed shot</p>
            </div>

            <div class="instructions-section">
                <h3>üéÆ Tips</h3>
                <p>‚Ä¢ Start at position A0 (always safe)</p>
                <p>‚Ä¢ Pay attention to warning messages!</p>
                <p>‚Ä¢ Dragon roar = dragon is one square away</p>
                <p>‚Ä¢ Breeze = pit is one square away</p>
                <p>‚Ä¢ Flapping wings = bat is one square away</p>
                <p>‚Ä¢ Getting the rope first makes exploring safer</p>
                <p>‚Ä¢ Score is based on how fast you win (1 point per 5 seconds)</p>
            </div>

            <div class="instructions-section">
                <h3>üèÜ Winning</h3>
                <p>Kill the dragon with the magical arrow. Lower time = higher score!</p>
            </div>

            <button id="modal-close-btn" class="action-btn">Got It!</button>
        </div>
    </div>

    <script src="js/game.js" type="module"></script>
</body>
</html>